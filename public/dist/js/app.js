(function(e){function t(t){for(var n,r,s=t[0],c=t[1],l=t[2],p=0,u=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(u.length)u.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},o={app:0},i=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("f2bf"),o=Object(n["z"])("data-v-26cce5b3");Object(n["q"])("data-v-26cce5b3");var i={id:"app"},r={id:"nav"},s=Object(n["d"])("Home"),c=Object(n["d"])(" | "),l=Object(n["d"])("About"),d=Object(n["d"])(" | "),p=Object(n["d"])("Participate");Object(n["o"])();var u=o((function(e,t){var a=Object(n["t"])("router-link"),u=Object(n["t"])("router-view");return Object(n["n"])(),Object(n["c"])("div",i,[Object(n["e"])("div",r,[Object(n["e"])(a,{to:"/"},{default:o((function(){return[s]})),_:1}),c,Object(n["e"])(a,{to:"about"},{default:o((function(){return[l]})),_:1}),d,Object(n["e"])(a,{to:"participate"},{default:o((function(){return[p]})),_:1})]),Object(n["e"])(u)])})),m=(a("cdcd"),a("6b0d")),f=a.n(m);const b={},h=f()(b,[["render",u],["__scopeId","data-v-26cce5b3"]]);var g=h,E=a("8c4f"),v=Object(n["z"])("data-v-5e2423cf");Object(n["q"])("data-v-5e2423cf");var w={class:"home"};Object(n["o"])();var _=v((function(e,t,a,o,i,r){return Object(n["n"])(),Object(n["c"])("div",w,[Object(n["e"])("img",{src:"".concat(i.publicPath,"/assets/ThreeD-Garden-Logo-Circle-Carrot.png"),alt:"ThreeD Garden => Carrot Logo",width:"70"},null,8,["src"])])})),x={name:"Home",data:function(){return{publicPath:"/wp-content/plugins/threed-garden/public"}}};a("c51b");const y=f()(x,[["render",_],["__scopeId","data-v-5e2423cf"]]);var T=y,O={class:"about"},j=Object(n["e"])("h1",null,"About ThreeD Garden",-1);function R(e,t){return Object(n["n"])(),Object(n["c"])("div",O,[j])}const H={},M=f()(H,[["render",R]]);var I=M,S={class:"participate"},D=Object(n["e"])("h1",null,"Participate in the ThreeD Garden real life game.",-1);function k(e,t,a,o,i,r){var s=Object(n["t"])("ThreeDGarden");return Object(n["n"])(),Object(n["c"])("div",S,[D,Object(n["e"])(s,{msg:"Play",subtitle:"Now"})])}var P=Object(n["z"])("data-v-0bfec68d");Object(n["q"])("data-v-0bfec68d");var A={class:"threedgarden"};Object(n["o"])();var z=P((function(e,t,a,o,i,r){return Object(n["n"])(),Object(n["c"])("div",A,[Object(n["e"])("h1",null,Object(n["v"])(a.msg),1),Object(n["e"])("h2",null,Object(n["v"])(a.subtitle),1)])})),C=(a("a4d3"),a("e01a"),a("99af"),a("cb29"),a("4de4"),a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("dca8"),a("d3b7"),a("820e"),a("25f0"),a("3ca3"),a("38cf"),a("2ca0"),a("498a"),a("1913"),a("9911"),a("159b"),a("ddb0"),a("b85c"),a("2909")),N=a("e6a9"),L="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiJ1bmtub3duIiwic3ViIjoxNTI2NywiaWF0IjoxNjM2NjU3ODUxLCJqdGkiOiIwNTBiMzIxNC02NzcxLTRlYzktODhmMS02NTVhYWVhNWQzN2QiLCJpc3MiOiIvL215LmZhcm0uYm90OjQ0MyIsImV4cCI6MTY0MTg0MTg1MSwibXF0dCI6ImNsZXZlci1vY3RvcHVzLnJtcS5jbG91ZGFtcXAuY29tIiwiYm90IjoiZGV2aWNlXzE1Mjk3Iiwidmhvc3QiOiJ4aWNvbmZ1bSIsIm1xdHRfd3MiOiJ3c3M6Ly9jbGV2ZXItb2N0b3B1cy5ybXEuY2xvdWRhbXFwLmNvbTo0NDMvd3MvbXF0dCJ9.K8jzw-l_KduohGUgS_rkmNx4700XQyZX3-JCigk-5gXf4y-aemDNemzABGpIvULVj9D02RXEiLAzPtSxRpGS_AWpwd0OSU35HNO_pCL7-KLmtmpanAOxutflPe9KN_stU1AgZC42TmMYLYeMZY1ornQOZTaIgT6dYJkqJex7HV6D1LS-1yjvEdPM2E1UTh6OWUFDndq-fdwyVNuQfYdbu0CLhTua3SaNaXCueZ7qew3-XVUx48PS2X8XFACkveZbRfb55qgabT-WpcQB4KyujdKFbAotZqJeZ1_aCxTa4WT_y_zFV7gVptgeK2FAXC1DE9cH4FJXipt0AMPksQGShA",G=new N["Farmbot"]({token:L});G.connect().then((function(){return G.setConfig("hey","HEY HEY HEY"),console.log(G.getConfig("hey")),G.getConfig("hey")})).then((function(){return G.moveRelative({x:1,y:2,z:3,speed:100})})),console.log("bot",G);var W=window.postdata;console.log("MARTY: postdata",W);var F,Y,X,J,V=W.plugin_name,B=W.plugin_version,Z=W.plugin_url,U=(W.theme_uri,W.rest_url),q=W.world_id;console.log("MARTY: pluginName",V,B),J=new dat.GUI({autoPlace:!0,closeOnTop:!0}),J.close(),J.domElement.id="gui";var Q,K,$=J.addFolder("Rotation + Animation"),ee=J.addFolder("Camera Position"),te=J.addFolder("Directional Light"),ae=J.addFolder("Allotments"),ne=J.addFolder("Beds"),oe=(J.addFolder("Plants"),J.addFolder("Annotations")),ie=J.addFolder("Character"),re={action:"Idle"};re.actionTime=Date.now();var se={},ce=["Breathing Idle","Driving","Idle","Left Turn","Pointing","Pointing Gesture"];ce=[].concat(Object(C["a"])(ce),["Right Turn","Running","Talking","Turn","Walking","Walking Backwards"]);var le={modes:Object.freeze({NONE:Symbol("none"),PRELOAD:Symbol("preload"),INITIALISING:Symbol("initialising"),CREATING_LEVEL:Symbol("creating_level"),ACTIVE:Symbol("active"),GAMEOVER:Symbol("gameover")}),ANIMATE:!1,assetsPath:"".concat(Z,"assets/"),data:{world:[{id:q}],scene:[],allotment:[],bed:[],plant:[],planting_plan:[]},intersectedObject1:null,intersectedObject2:null,colliders:[],environment:{},farmhouse:{}};le.mode=le.modes.NONE,$.add(le,"ANIMATE").name("Run Animation");var de=SFX.supportsAudioType("mp3")?"mp3":"ogg",pe={assets:["".concat(le.assetsPath,"sfx/gliss.").concat(de),"".concat(le.assetsPath,"sfx/factory.").concat(de),"".concat(le.assetsPath,"sfx/button.").concat(de),"".concat(le.assetsPath,"sfx/door.").concat(de),"".concat(le.assetsPath,"sfx/fan.").concat(de),"".concat(le.assetsPath,"fbx/environment.fbx"),"".concat(le.assetsPath,"fbx/girl-walk.fbx"),"".concat(le.assetsPath,"fbx/usb.fbx")],oncomplete:function(){ye()}};ce.forEach((function(e){pe.assets.push("".concat(le.assetsPath,"fbx/anims2/").concat(e,".fbx"))})),le.mode=le.modes.PRELOAD,console.log("MARTY: params",le),console.log("MARTY: options",pe);new Preloader(pe);window.onload=function(e){},window.garden=void 0,window.onError=function(e){console.error(JSON.stringify(e))};var ue=new THREE.FBXLoader,me=new THREE.TextureLoader,fe=new THREE.Clock,be=new THREE.Raycaster,he=new THREE.Vector2,ge="".concat(U,"scene/?_embed&per_page=100"),Ee="".concat(U,"allotment/?_embed&per_page=100"),ve="".concat(U,"bed/?_embed&per_page=100"),we="".concat(U,"planting_plan/?_embed&per_page=100"),_e="".concat(U,"plant/?_embed&per_page=100"),xe=[ge,Ee,ve,we,_e];function ye(){Promise.allSettled(xe.map((function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){var t=e[0].type;switch(t){case"scene":le.data.scene=Object(C["a"])(e);break;case"allotment":le.data.allotment=Object(C["a"])(e);break;case"bed":le.data.bed=Object(C["a"])(e);break;case"plant":le.data.plant=Object(C["a"])(e);break;case"planting_plan":le.data.planting_plan=Object(C["a"])(e);break;default:break}}))}))).then((function(e){e.forEach((function(e,t){e.status,"rejected"==e.status&&console.log(e)})),console.log("-----------------"),console.log("params.data------"),console.log(le.data),console.log("-----------------"),Te()}))}function Te(){var e=le.data.scene[0],t=e.id;if(F=new THREE.Scene,F.name="3D Garden",e.acf.scene_background_image_px){var a=[e.acf.scene_background_image_px,e.acf.scene_background_image_nx,e.acf.scene_background_image_py,e.acf.scene_background_image_ny,e.acf.scene_background_image_pz,e.acf.scene_background_image_nz],n=(new THREE.CubeTextureLoader).load(a);n.format=THREE.RGBFormat,F.background=n}else if(e.acf.scene_background_image)var o=me.load(e.acf.scene_background_image,(function(){var e=new THREE.WebGLCubeRenderTarget(o.image.height);e.fromEquirectangularTexture(Q,o),F.background=e}));else e.acf.scene_background_color&&(F.background=new THREE.Color(e.acf.scene_background_color));var i=ze(e.acf.scene_plane_width_x,e.acf.scene_plane_length_y,e.acf.scene_plane_background_color);if(i.name="plane-jane",i.rotation.x=-Math.PI/2,$.add(i.rotation,"x",-Math.PI,Math.PI).listen(),$.add(i.rotation,"y",-Math.PI,Math.PI).listen(),$.add(i.rotation,"z",-Math.PI,Math.PI).listen(),e.acf.scene_plane_texture_image){i.material.roughness=0,i.material.map=me.load(e.acf.scene_plane_texture_image);var r=i.material.map;r.wrapS=THREE.RepeatWrapping,r.wrapT=THREE.RepeatWrapping,r.repeat.set(4,4)}var s=Ce(16777215,2.1);s.position.set(-90,-120,120);var c=new THREE.CameraHelper(s.shadow.camera);c.visible=!1,te.add(c,"visible",0,20).name("Show Light Helper"),te.add(s,"intensity",0,20),te.add(s.position,"x",-500,500),te.add(s.position,"y",-500,500),te.add(s.position,"z",-500,500),i.add(s),F.add(c),F.add(i),Y=new THREE.PerspectiveCamera(55,window.innerWidth/window.innerHeight,.1,1e3),Y.name="gardencam1",Y.position.set(86,64,182);var l=new THREE.CameraHelper(Y);l.visible=!1,F.add(l),ee.add(l,"visible",0,20).name("Show Camera Helper"),ee.add(Y.position,"x",-500,500).listen(),ee.add(Y.position,"y",-500,500).listen(),ee.add(Y.position,"z",-500,500).listen(),Q=new THREE.WebGLRenderer({alpha:!0,antialias:!0}),Q.shadowMap.enabled=!0,Q.setSize(window.innerWidth-240,window.innerHeight-100),Q.domElement.camera=Y,Q.domElement.targetList=i.children,Q.domElement.addEventListener("pointermove",We,!1),Q.domElement.addEventListener("pointerdown",Fe,!1),X=new THREE.OrbitControls(Y,Q.domElement),X.enableDamping=!0,X.dampingFactor=.25,X.enableZoom=!0,X.rotateSpeed=.5,X.autoRotate=!1,X.autoRotateSpeed=.03,X.minDistance=.01,X.maxDistance=340,X.maxPolarAngle=Math.PI/2-.04,X.target=new THREE.Vector3(0,0,0),Q.domElement.controls=X,K=document.querySelector("#webgl"),K.append(J.domElement),K.append(Q.domElement),Q.domElement,De(le.data.allotment,i,t),ue.load("".concat(le.assetsPath,"characters/SK_Chr_Farmer_Male_01.fbx"),(function(e){e.mixer=new THREE.AnimationMixer(e),re.mixer=e.mixer,re.root=e.mixer.getRoot(),e.name="Gardener",e.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!1)})),me.load("".concat(le.assetsPath,"textures/PolygonFarm_Texture_01_B.png"),(function(t){e.traverse((function(e){e.isMesh&&(e.material.map=t)}))})),re.object=new THREE.Object3D,re.object.add(e),re.object.scale.set(.033,.033,.033),re.object.rotation.x=Math.PI/2,i.add(re.object),ie.add(re.object,"visible").name("Show Character").listen(),p(ue)})),He(i),Me(i),Ie(i),Se(i);new JoyStick({onMove:Re,game:K});var d=function e(){var t=fe.getDelta();if(Ge(Y,i.children),X.update(),TWEEN.update(),requestAnimationFrame(e),le.ANIMATE&&(i.rotation.z-=7e-4),void 0!==re.mixer&&re.mixer.update(t),"Walking"==re.action){var a=Date.now()-re.actionTime;a>2e3&&re.move.forward>.7&&Oe("Running")}if(void 0!==re.move&&je(t),void 0!=re.cameras&&void 0!=re.cameras.active){Y.position.lerp(re.cameras.active.getWorldPosition(new THREE.Vector3),.05);var n=re.object.position.clone();n.y+=200,Y.lookAt(n)}Q.render(F,Y)};d();var p=function e(t){var a=ce.pop();t.load("".concat(le.assetsPath,"fbx/anims2/").concat(a,".fbx"),(function(n){se[a]=n.animations[0],ce.length>0?e(t):(ce=[],Oe("Idle"),d())}))}}function Oe(e){var t=re.mixer.clipAction(se[e]);t.time=0,console.log("-----------------------"),console.log("animations-----------------"),console.log(se),console.log("-----------------------"),re.mixer.stopAllAction(),re.action=e,re.actionTime=Date.now(),t.fadeIn(.5),t.play()}function je(e){var t=re.object.position.clone();t.y+=60;var a=new THREE.Vector3;re.object.getWorldDirection(a),re.move.forward<0&&a.negate();new THREE.Raycaster(t,a);var n=!1;le.colliders;if(!n)if(re.move.forward>0){var o="Running"==re.action?24:8;re.object.translateZ(e*o)}else re.move.forward<0&&re.object.translateZ(2*-e);re.object.rotateY(re.move.turn*e)}function Re(e,t){t=-t,e>.2?"Walking"!=re.action&&"Running"!=re.action&&Oe("Walking"):e<-.2?"Walking Backwards"!=re.action&&Oe("Walking Backwards"):(e=0,Math.abs(t)>.05?"Left Turn"!=re.action&&Oe("Left Turn"):"Idle"!=re.action&&Oe("Idle")),re.move={forward:e,turn:t}}function He(e){ue.load("".concat(le.assetsPath,"fbx/Building_Farm_House_02.fbx"),(function(e){le.farmhouse=e,le.colliders=[],e.rotation.y=Math.PI/180*270,e.position.set(0,0,100),e.scale.set(2.2,2.2,2.2),F.add(e),e.traverse((function(e){e.isMesh&&(e.name.startsWith("proxy")?(le.colliders.push(e),e.material.visible=!1):(e.castShadow=!0,e.receiveShadow=!0))})),me.load("".concat(le.assetsPath,"textures/SimpleFarm.png"),(function(t){e.traverse((function(e){e.isMesh&&(e.material.map=t)}))}))}))}function Me(e){ue.load("".concat(le.assetsPath,"fbx/Prop_Chicken_Coop_02.fbx"),(function(e){le.farmhouse=e,le.colliders=[],e.rotation.y=Math.PI/180*90,e.position.set(80,0,-10),e.scale.set(2.2,2.2,2.2),F.add(e),e.traverse((function(e){e.isMesh&&(e.name.startsWith("proxy")?(le.colliders.push(e),e.material.visible=!1):(e.castShadow=!0,e.receiveShadow=!0))})),me.load("".concat(le.assetsPath,"textures/SimpleFarm.png"),(function(t){e.traverse((function(e){e.isMesh&&(e.material.map=t)}))}))}))}function Ie(e){loaderGLTF.load("".concat(le.assetsPath,"gltf/Chicken.glb"),(function(e){var t=e.scene;t.name="Chicken GLB",t.position.set(-3,0,0),t.scale.set(4,4,4),t.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),F.add(t),console.log("-----------------------"),console.log("loadChicken object----------------"),console.log(e),console.log("-----------------------"),console.log("-----------------------"),console.log("loadChicken model----------------"),console.log(t),console.log("-----------------------")}))}function Se(e){var t,a=8,n=-45,o=0,i=-138,r=20;for(t=1;t<=a;t++)ue.load("".concat(le.assetsPath,"fbx/SM_Env_Road_Gravel_Straight_01.fbx"),(function(e){e.position.set(n,0,i),n+=o,i+=r,e.scale.set(.02,.01,.02),e.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),me.load("".concat(le.assetsPath,"textures/PolygonFarm_Texture_03_A.png"),(function(t){e.traverse((function(e){e.isMesh&&(e.material.transparent=!0,e.material.opacity=.7,e.material.map=t)}))})),F.add(e),console.log("-----------------------"),console.log("ROAD----------------"),console.log(e),console.log("-----------------------")}));for(t=1;t<=1;t++)ue.load("".concat(le.assetsPath,"fbx/SM_Env_Road_Gravel_T_Section_01.fbx"),(function(e){console.log("-----------------------"),console.log("ROAD T----------------"),console.log(n,i),console.log("-----------------------"),e.position.set(n,0,i),n+=o,i+=r,e.scale.set(.02,.01,.02),e.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),me.load("".concat(le.assetsPath,"textures/PolygonFarm_Texture_03_A.png"),(function(t){e.traverse((function(e){e.isMesh&&(e.material.transparent=!0,e.material.opacity=.7,e.material.map=t)}))})),F.add(e),console.log("-----------------------"),console.log("ROAD T----------------"),console.log(e),console.log("-----------------------")}))}function De(e,t,a){var n=e.filter((function(e){return e.acf.allotment_scene==a}));n.forEach((function(e){var a={parameters:{},position:{},images:{}};a.parameters.x=parseInt(e.acf.allotment_width),a.parameters.y=parseInt(e.acf.allotment_length),a.parameters.z=parseInt(e.acf.allotment_height),a.position.x=parseInt(e.acf.allotment_position_x),a.position.y=parseInt(e.acf.allotment_position_y),a.position.z=parseInt(e.acf.allotment_position_z),a.images.texture=e.acf.allotment_texture_image,a.images.featured=Xe(e),a.shape=e.acf.allotment_shape,a.color=e.acf.allotment_color,a.title=e.title.rendered,a.postID=e.id,a.description=e.content.rendered,a.link=e.link;var n=Ae(a.shape,a.parameters.x,a.parameters.y,a.parameters.z,a.color);if(n.name=a.title,n.userData.type="structure",n.userData.postID=a.postID,n.userData.description=a.description,n.userData.annotation=a.title,n.userData.link=a.link,n.position.x=a.position.x,n.position.y=a.position.y,n.position.z=n.geometry.parameters.depth/2+a.position.z,n.material.roughness=.9,null!=a.images.texture&&0!=a.images.texture){n.material.map=me.load(a.images.texture);for(var o=0;o<n.material.length;o++){n.material[o].map=me.load(a.images.texture);var i=n.material[o].map;i.wrapS=THREE.RepeatWrapping,i.wrapT=THREE.RepeatWrapping,i.repeat.set(4,4)}}t.add(n),ke(le.data.bed,t,a.postID,n.position.x,n.position.y,0);var r=Ne(n.name,n.position.x,n.position.y,a.parameters.z+3,a.postID,n.userData.annotation,n.userData.link);r.name="INFOSPOT: ".concat(n.name),r.visible=!0,ae.add(r,"visible").name("InfoSphere").listen(),t.add(r)}))}function ke(e,t,a,n,o,i){var r=e.filter((function(e){return e.acf.bed_allotment==a}));r.forEach((function(e){var a={parameters:{},position:{},images:{}};a.parameters.x=parseInt(e.acf.bed_width)/12,a.parameters.y=parseInt(e.acf.bed_length)/12,a.parameters.z=parseInt(e.acf.bed_height)/12,a.position.x=parseInt(e.acf.bed_position_x)/12+n,a.position.y=parseInt(e.acf.bed_position_y)/12+o,a.position.z=parseInt(e.acf.bed_position_z)/12+a.parameters.z/2,a.images.texture=e.acf.bed_texture_image,a.images.featured=Xe(e),a.shape=e.acf.bed_shape,a.color=e.acf.bed_color,a.title=e.title.rendered,a.postID=e.id,a.description=e.content.rendered,a.link=e.link;var i=Ae(a.shape,a.parameters.x,a.parameters.y,a.parameters.z,a.color);if(i.name=a.title,i.userData.type="structure",i.userData.postID=a.postID,i.userData.description=a.description,i.userData.annotation=a.title,i.userData.link=a.link,i.position.x=a.position.x?a.position.x:0,i.position.y=a.position.y?a.position.y:0,i.position.z=a.position.z?a.position.z:0,i.material.roughness=.9,null!=a.images.texture&&0!=a.images.texture){i.material.map=me.load(a.images.texture);for(var r=0;r<i.material.length;r++){i.material[r].map=me.load(a.images.texture);var s=i.material[r].map;s.wrapS=THREE.RepeatWrapping,s.wrapT=THREE.RepeatWrapping,s.repeat.set(4,4)}}t.add(i),le.colliders.push(i),Pe(le.data.planting_plan,t,a.postID,i.position.x,i.position.y,0);var c=Ne(i.name,i.position.x,i.position.y,a.parameters.z+3,a.postID,i.userData.annotation,i.userData.link);c.name="INFOSPOT: ".concat(i.name),c.visible=!1,ne.add(c,"visible").name("InfoSphere").listen(),t.add(c)}))}function Pe(e,t,a,n,o,i){var r=[],s=[];e.forEach((function(e){e.acf.planting_plan_bed_plant_schedule.forEach((function(t){t.planting_plan_bed==a&&s.pushIfNotExist(e,(function(t){return t.id===e.id}))})),r=[].concat(s)})),r.forEach((function(e){e.acf.planting_plan_bed_plant_schedule.forEach((function(i){if(i.planting_plan_bed==a){var r=le.data.plant.filter((function(e){return e.id==i.planting_plan_plant}));r.forEach((function(a){var r={parameters:{},position:{},images:{}};r.parameters.x=parseInt(a.acf.plant_width)/12,r.parameters.y=parseInt(a.acf.plant_length)/12,r.parameters.z=parseInt(a.acf.plant_height)/12,r.position.x=parseInt(i.plant_position_x)/12+n,r.position.y=parseInt(i.plant_position_y)/12+o,r.position.z=parseInt(i.plant_position_z)/12+r.parameters.z/2,r.images.texture=a.acf.plant_texture_image,r.images.featured=Xe(e),r.shape=a.acf.plant_shape,r.color=a.acf.plant_color,r.title=a.title.rendered,r.postID=a.id,r.description=a.content.rendered,r.link=a.link;var s=Ae("Tree",r.parameters.x,r.parameters.y,r.parameters.z,r.color);if(s.name=r.title,s.userData.type="structure",s.userData.postID=r.postID,s.userData.description=r.description,s.userData.annotation=r.title,s.userData.link=r.link,s.position.x=r.position.x?r.position.x:0,s.position.y=r.position.y?r.position.y:0,s.position.z=r.position.z?r.position.z:0,s.rotation.x=Math.PI/2,s.material.roughness=.9,null!=r.images.texture&&0!=r.images.texture){s.material.map=me.load(r.images.texture);for(var c=0;c<s.material.length;c++){s.material[c].map=me.load(r.images.texture);var l=s.material[c].map;l.wrapS=THREE.RepeatWrapping,l.wrapT=THREE.RepeatWrapping,l.repeat.set(4,4)}}t.add(s),le.colliders.push(s),console.log("-------------------------"),console.log("plant structure----------"),console.log(s),console.log("-------------------------");var d=Ne(s.name,s.position.x,s.position.y,r.parameters.z+3,r.postID,s.userData.annotation,s.userData.link);d.name="INFOSPOT: ".concat(s.name),d.visible=!1,ne.add(d,"visible").name("InfoSphere").listen(),t.add(d)}))}}))}))}function Ae(e,t,a,n,o){var i,r,s;switch(e){case"Box":i=new THREE.BoxGeometry(t,a,n),r=new THREE.MeshStandardMaterial({transparent:!0,opacity:.8,color:o,side:THREE.DoubleSide,depthWrite:!0}),s=new THREE.Mesh(i,[r,r,r,r]),s.castShadow=!0;break;case"Cone":i=new THREE.ConeGeometry(t/2,a/2,n,32,1,!0),r=new THREE.MeshStandardMaterial({color:o,side:THREE.DoubleSide}),s=new THREE.Mesh(i,r),s.castShadow=!0,s.rotation.x=Math.PI/2;break;case"Cylinder":i=new THREE.CylinderGeometry(t/2,a/2,n,32,1,!0),r=new THREE.MeshStandardMaterial({color:o,side:THREE.DoubleSide}),s=new THREE.Mesh(i,r),s.castShadow=!0,s.rotation.x=Math.PI/2;break;case"InfoSphere":i=new THREE.SphereGeometry(t,a,n),r=new THREE.MeshStandardMaterial({color:o,side:THREE.DoubleSide}),s=new THREE.Mesh(i,r),s.castShadow=!0;break;case"Sphere":i=new THREE.SphereGeometry(t,a,n),r=new THREE.MeshStandardMaterial({color:o,side:THREE.DoubleSide}),s=new THREE.Mesh(i,r),s.castShadow=!0;break;case"Tree":var c=new THREE.Tree({generations:3,length:1,uvLength:3,radius:.1,radiusSegments:8,heightSegments:8});i=THREE.TreeGeometry.build(c),r=new THREE.MeshStandardMaterial({color:o,side:THREE.DoubleSide}),s=new THREE.Mesh(i,r),s.castShadow=!0;break;case"Bush":i=new THREE.CubeGeometry(t,a,n),o=new THREE.Color("rgb(153,90,0)"),r=new THREE.MeshPhongMaterial({color:o,wireframe:!1}),s=new THREE.Mesh(i,r),F.add(s),s.matrix.makeTranslation(0,-125,0),s.matrixAutoUpdate=!1;var l=4,d=100,p=150;function u(e,t,a){if(e>0){var n=new THREE.Matrix4,o=new THREE.Matrix4,c=new THREE.Matrix4,m=new THREE.Matrix4,f=new THREE.Matrix4,b=new THREE.Matrix4,h=new THREE.Matrix4,g=(t.clone(),a.clone()),E=a.clone();g.g+=.64/l,r=new THREE.MeshPhongMaterial({color:g,wireframe:!1}),s=new THREE.Mesh(i,r),c.makeTranslation(d/2,0,0),m.makeTranslation(0,p,0),f.makeRotationZ(-Math.PI/4),b.makeRotationY(Math.PI/2),h.makeScale(.75,.75,.75),n.multiply(b),n.multiply(c),n.multiply(f),n.multiply(h),n.multiply(m),n.multiply(t),s.matrix.copy(n),s.matrixAutoUpdate=!1,s.updateMatrix=!1,F.add(s),u(e-1,s.matrix.clone(),g),E.g+=.64/l,r=new THREE.MeshPhongMaterial({color:E,wireframe:!1}),s=new THREE.Mesh(i,r),c.makeTranslation(-d/2,0,0),m.makeTranslation(0,p,0),f.makeRotationZ(Math.PI/4),b.makeRotationY(Math.PI/2),h.makeScale(.75,.75,.75),o.multiply(b),o.multiply(c),o.multiply(f),o.multiply(h),o.multiply(m),o.multiply(t),s.matrix.copy(o),s.matrixAutoUpdate=!1,s.updateMatrix=!1,F.add(s),u(e-1,s.matrix.clone(),E)}}u(l,s.matrix,o);default:i=new THREE.BoxGeometry(t,a,n),r=new THREE.MeshStandardMaterial({color:o,side:THREE.DoubleSide}),s=new THREE.Mesh(i,r),s.castShadow=!0;break}return s}function ze(e,t,a){var n=new THREE.PlaneGeometry(e,t),o=new THREE.MeshStandardMaterial({color:a,side:THREE.DoubleSide}),i=new THREE.Mesh(n,o);return i.receiveShadow=!0,i}function Ce(e,t){var a=new THREE.DirectionalLight(e,t);return a.castShadow=!0,a.shadow.bias=1e-4,a.shadow.mapSize.width=4096,a.shadow.mapSize.height=4096,a.shadow.camera.left=-1e3,a.shadow.camera.bottom=-1e3,a.shadow.camera.right=1e3,a.shadow.camera.top=1e3,a.shadow.camera.near=.5,a.shadow.camera.far=500,a}function Ne(e,t,a,n,o,i,r){var s=Ae("InfoSphere",.9,32,32,3029337);s.name=e,s.userData.type="infospot",s.userData.postID=o,s.userData.description="",s.userData.annotation=i,s.userData.link=r,s.position.set(t,a,n),s.visible=!0;var c=new THREE.Vector3(s.position.x,s.position.y,0);c.project(Y),c.x=Math.round((.5+c.x/2)*(Q.domElement.width/window.devicePixelRatio)),c.y=Math.round((.5-c.y/2)*(Q.domElement.height/window.devicePixelRatio));var l=c.x,d=c.y,p=Le(s.userData.link,s.name,l,d);return p.name="ANNOTATION: ".concat(s.name),p.userData.type="annotation",p.userData.postID=o,p.userData.description="",p.userData.annotation=s.name,p.userData.link=r,p.visible=!1,s.add(p),s}function Le(e,t,a,n){var o=document.createElement("div");o.classList.add("annotation"),o.innerHTML='\n\t\t<a href="'.concat(e,'" target="_blank">').concat(t,"</a>\n\t\t(").concat(a,", ").concat(n,')\n\t\t<span class="dismiss" onclick="dismiss(this)">x</span>\n\t'),o.hidden=!0,o.style.display="none",o.style.top="".concat(n,"px"),o.style.left="".concat(a,"px"),oe.add(o,"hidden").listen(),oe.add(o.style,"display").listen(),oe.add(o.style,"top").listen(),oe.add(o.style,"left").listen(),document.body.appendChild(o),Ye(o);var i=new THREE.CSS3DObject(o);return i}function Ge(e,t){be.setFromCamera(he,e);var a=be.intersectObjects(t);if(a.length>0){if(a[0].object!=le.intersectedObject1){if(le.intersectedObject1)if("Array"==le.intersectedObject1.material.constructor.name)for(var n=0;n<le.intersectedObject1.material.length;n++)le.intersectedObject1.material[n].color.setHex(le.intersectedObject1.currentHex);else le.intersectedObject1.material.color.setHex(le.intersectedObject1.currentHex);if(le.intersectedObject1=a[0].object,"Array"==le.intersectedObject1.material.constructor.name){for(var o=0;o<le.intersectedObject1.material.length;o++)le.intersectedObject1.currentHex=le.intersectedObject1.material[o].color.getHex();for(var i=0;i<le.intersectedObject1.material.length;i++)le.intersectedObject1.material[i].color.setHex(14540032)}else le.intersectedObject1.currentHex=le.intersectedObject1.material.color.getHex(),le.intersectedObject1.material.color.setHex(14540032)}}else{if(le.intersectedObject1)if("Array"==le.intersectedObject1.material.constructor.name)for(var r=0;r<le.intersectedObject1.material.length;r++)le.intersectedObject1.material[r].color.setHex(le.intersectedObject1.currentHex);else le.intersectedObject1.material.color.setHex(le.intersectedObject1.currentHex);le.intersectedObject1=null}}function We(e){he.x=e.offsetX/(window.innerWidth-240)*2-1,he.y=-e.offsetY/(window.innerHeight-100)*2+1}function Fe(e){he.x=e.offsetX/(window.innerWidth-240)*2-1,he.y=-e.offsetY/(window.innerHeight-100)*2+1;var t=new THREE.Raycaster;t.setFromCamera(he,e.target.camera);var a=t.intersectObjects(e.target.targetList);if(a.length>0){var n=a[0].object;if(le.intersectedObject2,le.intersectedObject2=n,"structure"===le.intersectedObject2.userData.type&&0==e.button){var o=F.getObjectByName("INFOSPOT: ".concat(le.intersectedObject2.name));o&&(!0===o.visible?o.visible=!1:o.visible=!0)}le.intersectedObject2.children.forEach((function(t){"Object3D"===t.type&&0==e.button&&(!0===t.element.hidden?(t.element.hidden=!1,t.element.style.display="block",t.visible=!0):(t.element.hidden=!0,t.element.style.display="none",t.visible=!1))}))}else le.intersectedObject2,le.intersectedObject2=null}function Ye(e){var t=0,a=0;function n(e){e=e||window.event,e.preventDefault(),t=e.clientX,a=e.clientY,document.onmouseup=i,document.onmousemove=o}function o(n){n=n||window.event,n.preventDefault(),t-n.clientX,a-n.clientY,t=n.clientX,a=n.clientY,e.style.top=a+"px",e.style.left=t+"px"}function i(){document.onmouseup=null,document.onmousemove=null}document.getElementById(e.id+"header")?document.getElementById(e.id+"header").onmousedown=n:e.onmousedown=n}function Xe(e){var t={};return 0===e.featured_media||(t.featuredObject=e._embedded["wp:featuredmedia"][0],t.imgUrl=t.featuredObject.source_url,t.imgMediumUrl="",t.imgLargeUrl="",t.imgWidth=t.featuredObject.media_details.width,t.imgHeight=t.featuredObject.media_details.height,t.featuredObject.media_details.sizes.hasOwnProperty("large")&&(t.imgWidth=t.featuredObject.media_details.sizes.full.width,t.imgHeight=t.featuredObject.media_details.sizes.full.height,t.imgLargeUrl=t.featuredObject.media_details.sizes.large.source_url+" 1024w, ")),t}Array.prototype.inArray=function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return!0;return!1},Array.prototype.pushIfNotExist=function(e,t){this.inArray(t)||this.push(e)};var Je={name:"ThreeDGarden",props:{msg:String,subtitle:String}};a("6fae");const Ve=f()(Je,[["render",z],["__scopeId","data-v-0bfec68d"]]);var Be=Ve,Ze={name:"Participate",components:{ThreeDGarden:Be},data:function(){return{publicPath:"/wp-content/plugins/threed-garden/public"}}};const Ue=f()(Ze,[["render",k]]);var qe=Ue,Qe=[{path:"/",name:"home",component:T},{path:"/about",name:"about",component:I},{path:"/participate",name:"participate",component:qe}],Ke=Object(E["a"])({history:Object(E["b"])(),routes:Qe}),$e=Ke,et=a("5502"),tt=Object(et["a"])({state:{},mutations:{},actions:{},modules:{}});Object(n["b"])(g).use(tt).use($e).mount("#app")},6:function(e,t){},6780:function(e,t,a){},"6fae":function(e,t,a){"use strict";a("6780")},c51b:function(e,t,a){"use strict";a("f3fa")},cdcd:function(e,t,a){"use strict";a("d6e7")},d6e7:function(e,t,a){},f3fa:function(e,t,a){}});
//# sourceMappingURL=app.js.map